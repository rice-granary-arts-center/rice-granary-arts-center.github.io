<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="欢迎来到我们的艺术空间，探索当前、过去和未来的展览信息，预约功能以及艺术家访谈。">
    <title>米仓艺术空间</title>
    <link rel="stylesheet" href="styles.css">
    <script>
        // Exhibition information in both languages
        const exhibitionInfo = {
            zh: {
                title: "米仓美术中心开馆特别纪念展 - 小泽刚与管怀宾",
                duration: "展览时长：2024年3月15日至6月15日",
                time: "开放时间：周三至周日 10:00-18:00"
            },
            en: {
                title: "Hangzhou Rice Granary Art Center Opening Special Exhibition - Ozawa Tsuyoshi and Guan Huaibin",
                duration: "Duration: March 15, 2024 - June 15, 2024",
                time: "Opening Hours: Wednesday to Sunday 10:00 AM - 6:00 PM"
            }
        };

        document.addEventListener("DOMContentLoaded", function() {
            fetch('menu.html')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('menu-container').innerHTML = data;
                    const savedLanguage = localStorage.getItem('language') || 'zh';
                    switchLanguage(savedLanguage);
                    setActiveMenuItem();
                    updateBannerText(savedLanguage);
                });

            // Reorder elements for mobile
            if (window.innerWidth <= 768) {
                const poster = document.querySelector('.poster');
                const banner = document.querySelector('.banner');
                const menuContainer = document.querySelector('.menu-container');
                const siteLogo = document.querySelector('.site-logo');
                const content = document.querySelector('.content');
                
                // Clear and rebuild the content in correct order
                content.innerHTML = '';
                content.appendChild(poster);
                content.appendChild(banner);
                
                // Make menu fixed at bottom left
                menuContainer.style.position = 'fixed';
                siteLogo.style.bottom = '1rem';
                siteLogo.style.right = '1rem';
                menuContainer.style.textAlign = 'left';
                
                // Logo stays fixed bottom right
                siteLogo.style.position = 'fixed';
                siteLogo.style.bottom = '0';
                siteLogo.style.right = '0';
                siteLogo.style.top = 'auto';
            }
        });

        function updateBannerText(lang) {
            const info = exhibitionInfo[lang];
            const marquee = document.querySelector('.banner marquee');
            if (marquee) {
                marquee.innerHTML = `${info.title} | ${info.duration} | ${info.time}`;
            }
        }

        function switchLanguage(lang) {
            localStorage.setItem('language', lang);
            document.querySelectorAll('.language-switcher a').forEach(function(element) {
                element.classList.remove('active');
            });
            document.querySelector('.language-switcher a[data-lang="' + lang + '"]').classList.add('active');
            document.querySelectorAll('nav ul li a').forEach(function(element) {
                element.textContent = element.getAttribute('data-' + lang);
            });
            document.getElementById('site-logo').src = lang === 'zh' ? 'media/icons/Chinese.svg' : 'media/icons/English.svg';
            
            // Update banner text when language changes
            updateBannerText(lang);
        }

        function setActiveMenuItem() {
            const currentPath = window.location.pathname;
            const isIndexPage = currentPath === '/' || currentPath.endsWith('index.html');
            
            document.querySelectorAll('nav ul li a').forEach(function(element) {
                element.classList.remove('active');
                if ((isIndexPage && element.getAttribute('href') === 'index.html') || 
                    (!isIndexPage && element.getAttribute('href') === currentPath)) {
                    element.classList.add('active');
                    element.style.pointerEvents = 'none'; // Make it not selectable
                }
            });
        }
    </script>
</head>
<body>
    <div class="content">
        <div class="poster">
            <img src="media/images/poster_placeholder.svg" alt="Poster Image" class="poster-image">
        </div>
        <div class="banner">
            <marquee behavior="scroll" direction="left" scrollamount="5">
                <!-- Banner text will be populated by JavaScript -->
            </marquee>
        </div>
    </div>
    <div class="menu-container" id="menu-container"></div>
    <a href="index.html"><img id="site-logo" class="site-logo" src="media/icons/Chinese.svg" alt="米仓艺术中心"></a>
</body>
</html>